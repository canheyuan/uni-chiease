(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-game-fly-cutter-index"],{"47ab":function(t,i,e){var a=e("24fb"),n=e("1de5"),s=e("ec67"),r=e("a00a");i=a(!1);var c=n(s),h=n(r);i.push([t.i,'@charset "UTF-8";\n/**\n * 这里是uni-app内置的常用样式变量\n *\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\n *\n */\n/**\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\n *\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\n */\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */uni-page-body[data-v-d35584a2]{width:100%;height:100%;overflow:hidden}.game_box[data-v-d35584a2]{width:100%;height:100%;background:#eee;position:relative;background:url('+c+") no-repeat 50%;background-size:cover}.begin_box[data-v-d35584a2]{width:100%;height:100%;position:relative;background:url("+h+") no-repeat 50%;background-size:cover}.begin_box .load_txt[data-v-d35584a2]{position:absolute;top:50%;left:0;width:100%;margin-top:%?120?%;height:%?60?%;font-size:%?40?%;color:#fff;text-align:center;font-weight:700}.begin_tip[data-v-d35584a2]{background:rgba(0,0,0,.5);width:100%;height:100%;position:absolute;left:0;top:0;z-index:100}.begin_tip .des[data-v-d35584a2]{width:100%;text-align:center;padding-top:%?300?%;font-size:%?44?%;color:#fff}.begin_tip .btn[data-v-d35584a2]{position:absolute;bottom:%?200?%;left:50%;margin-left:%?-150?%;width:%?300?%;height:%?100?%;line-height:%?100?%;color:#fff;font-size:%?60?%;text-align:center}.game_canvas_box[data-v-d35584a2]{width:100%;height:100%}.game_canvas[data-v-d35584a2]{width:100%;height:100%}",""]),t.exports=i},"8dcb":function(t,i,e){"use strict";(function(t){Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var e,a,n,s,r=getApp(),c=null,h=uni.createInnerAudioContext(),o=uni.createInnerAudioContext(),l=uni.createInnerAudioContext(),f=uni.createInnerAudioContext();h.src=r.globalData.apiUrl+"/static/media/game/throw.mp3",o.src=r.globalData.apiUrl+"/static/media/game/insert.mp3",l.src=r.globalData.apiUrl+"/static/media/game/shibai.mp3",f.src=r.globalData.apiUrl+"/static/media/game/su1.mp3";var d={data:function(){return{imgUrl:r.globalData.imgUrl,isStop:!1,gameStatus:0,addScore:1,sumScore:0,bestScore:0,knifeTimes:0,elAlpha:1,knife:{x:0,y:0,w:15,h:70,rotate:0,dir:1,speed:8,status:0},knife2:{x:0,y:0,w:15,h:30},circle:{x:0,y:0,w:0,h:0,s:1,dir:0,speed:5,status:0}}},onLoad:function(){var t=uni.getSystemInfoSync();a=t.screenWidth,n=t.screenHeight,e=t.screenWidth/750,s=this.imgUrl},onReady:function(){c=uni.createCanvasContext("gameCanvas"),this.bestScore=uni.getStorageSync("flyGameBestScore")||0,this.beginFn()},methods:{startGameFn:function(){this.gameStatus=1},knifeDf:function(t){var i=this.knife;i.x=.5*a-20*e,i.y=.7*n,this.knife=i,t&&t()},circleDf:function(t){var i=this.circle;i.x=.5*a-166*e,i.y=120,i.w=333*e,i.h=163*e,this.circle=i,t&&t()},beginFn:function(){this.knifeDf(),this.circleDf(),this.drawImg()},ctxFont:function(t,i,e,a,n,s){c.setFontSize(a),c.setFillStyle(n),c.setTextAlign(s),c.fillText(t,i,e)},ctxKnife:function(t){c.translate(t.x+t.w/2,t.y+t.h/2),c.rotate(t.rotate*Math.PI/180),c.translate(-(t.x+t.w/2),-(t.y+t.h/2)),c.drawImage(this.imgUrl+"/game/knife-1.png",t.x,t.y,t.w,t.h)},ctxKnife2:function(t){c.drawImage(this.imgUrl+"/game/knife-4.png",t.x,t.y,t.w,t.h)},randomCircle:function(i){var s=this.circle,r=this.knifeTimes<100?this.knifeTimes:100,c=.7+.3*Math.random()*(1-r/100);t.log("sCir",c),s.x=(a-333*e*c)*Math.random(),s.y=.2*n+n*(2*Math.random())/10,s.w=333*e*c,s.h=163*e*c,this.circle=s,i&&i()},ctxCircle:function(t){c.drawImage(s+"/game/circle-2-6.png",t.x,t.y,t.w,t.h)},drawImage:function(t,i,e,a){c.drawImage(t,i,e);for(var n=c.getImageData(i,e,t.width,t.height),s=0,r=n.data.length;s<r;s+=4)n.data[s+3]=n.data[s+3]*a;c.putImageData(n,i,e)},drawImg:function(){switch(this.circleRun(),c.clearRect(0,0,a,n),this.ctxFont(this.sumScore,.5*a,40,40,"#ffffff","center"),c.drawImage(this.imgUrl+"/game/king.png",16,14,30,20),this.ctxFont(this.bestScore,50,36,28,"#fff","left"),this.gameStatus){case 3:c.setGlobalAlpha(this.elAlpha),this.ctxCircle(this.circle),this.addScore>0&&this.ctxFont("+"+this.addScore,this.circle.x+this.circle.w/2,this.circle.y-30,26,"#fff","center"),this.ctxKnife2(this.knife2),c.setGlobalAlpha(1);break;case 4:c.setGlobalAlpha(1-this.elAlpha),this.ctxFont("游戏结束 "+(this.sumScore>this.bestScore?"新纪录":""),a/2,300,40,"#000","center"),this.ctxFont("你在小李飞刀中得了 ".concat(this.sumScore," 分，真是"),a/2,350,22,"#000","center"),this.ctxFont("太棒了，再练练就能得心应手",a/2,390,22,"#000","center"),c.strokeRect(a/2-100,440,200,40),this.ctxFont("再来一次",a/2,466,20,"#000","center"),c.setGlobalAlpha(1);break;default:this.ctxCircle(this.circle),this.ctxKnife(this.knife)}c.draw()},circleRun:function(){var t=this.circle;switch(t.dir){case 1:this.circle.x=t.x-t.speed,t.x<=0&&(this.circle.dir=2);break;case 2:this.circle.x=t.x+t.speed,t.x>=a-this.circle.w&&(this.circle.dir=1);break}},knifeRun:function(){var i=this.knife;if(1==i.dir)this.knife.x=i.x-i.speed,i.x<=0&&(this.knife.dir=2);else if(2==i.dir)this.knife.x=i.x+i.speed,i.x>=a-this.knife.w&&(this.knife.dir=1);else if(3==i.dir)if(this.knife.y>this.circle.y+70)this.knife.y=i.y-20,this.knife.rotate=(this.knife.rotate+20)%360;else if(this.circle.dir=0,this.checkHitFn())if(1==this.elAlpha&&(o.play(),this.sumScore+=this.addScore),this.elAlpha-=.02,this.elAlpha<=0){if(this.elAlpha=1,this.gameStatus=2,this.knife.dir=1,this.knife.rotate=0,this.knifeDf(),this.knifeTimes>5){var e=this.knifeTimes<100?this.knifeTimes:100;this.circle.dir=parseInt(100*Math.random())<e?1:0}this.randomCircle()}else this.gameStatus=3,this.knife2.x=this.knife.x,this.knife2.y=0==this.addScore?-this.knife.h:this.circle.y+.65*this.circle.h;else l.play(),this.knife.y<-this.knife.h?(this.gameStatus=4,this.elAlpha>0?this.elAlpha-=.01:(t.log("this.isStop",this.isStop),this.isStop=!0,this.sumScore>this.bestScore&&uni.setStorageSync("flyGameBestScore",this.sumScore))):(this.knife.y=i.y-20,this.knife.rotate=(this.knife.rotate+20)%360);this.drawImg(),this.isStop||window.requestAnimationFrame(this.knifeRun)},touchstartFn:function(){switch(this.gameStatus){case 1:this.knife.dir=3,this.checkHitFn(),h.play(),this.knifeTimes+=1,window.requestAnimationFrame(this.knifeRun);break;case 2:this.knife.dir=3,this.gameStatus=2,h.play(),this.knifeTimes+=1;break;case 3:break;case 4:this.elAlpha<0&&(this.knifeTimes=0,this.isStop=!1,this.gameStatus=2,this.elAlpha=1,this.knife.dir=0,this.knife.rotate=0,this.sumScore>this.bestScore&&(this.bestScore=this.sumScore),this.sumScore=0,this.knifeDf(),this.circleDf(),window.requestAnimationFrame(this.knifeRun));break}},checkHitFn:function(){var t=this.knife,i=this.circle,e=t.x+t.w/2,a=null;if(e+t.w/2>i.x&&e<i.x+i.w-t.w/2){var n=parseInt(Math.abs(e-i.x-i.w/2)/(i.w/2)*100);n<2?a=5:n<15?a=3:n<66?a=2:n<=100&&(a=1)}return this.addScore=a||0,a}}};i.default=d}).call(this,e("5a52")["default"])},9449:function(t,i,e){"use strict";e.r(i);var a=e("e58c"),n=e("ade2");for(var s in n)"default"!==s&&function(t){e.d(i,t,(function(){return n[t]}))}(s);e("9da5");var r,c=e("f0c5"),h=Object(c["a"])(n["default"],a["b"],a["c"],!1,null,"d35584a2",null,!1,a["a"],r);i["default"]=h.exports},"9da5":function(t,i,e){"use strict";var a=e("de95"),n=e.n(a);n.a},a00a:function(t,i,e){t.exports=e.p+"static/img/bg01.7ae1f151.jpg"},ade2:function(t,i,e){"use strict";e.r(i);var a=e("8dcb"),n=e.n(a);for(var s in a)"default"!==s&&function(t){e.d(i,t,(function(){return a[t]}))}(s);i["default"]=n.a},de95:function(t,i,e){var a=e("47ab");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=e("4f06").default;n("08bb1d68",a,!0,{sourceMap:!1,shadowMode:!1})},e58c:function(t,i,e){"use strict";var a,n=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("v-uni-view",{staticClass:"game_box"},[t._e(),e("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:0==t.gameStatus,expression:"gameStatus==0"}],staticClass:"begin_tip"},[e("v-uni-view",{staticClass:"des"},[t._v("点击屏幕发射飞刀击中木板")]),e("v-uni-view",{staticClass:"btn",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.startGameFn.apply(void 0,arguments)}}},[t._v("开 始")])],1),e("v-uni-view",{staticClass:"game_canvas_box"},[e("v-uni-canvas",{staticClass:"game_canvas",attrs:{type:"2d","canvas-id":"gameCanvas","disable-scroll":"true"},on:{touchstart:function(i){arguments[0]=i=t.$handleEvent(i),t.touchstartFn.apply(void 0,arguments)}}})],1)],1)},s=[];e.d(i,"b",(function(){return n})),e.d(i,"c",(function(){return s})),e.d(i,"a",(function(){return a}))},ec67:function(t,i,e){t.exports=e.p+"static/img/bg02.c060cd05.png"}}]);